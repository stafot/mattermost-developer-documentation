<!DOCTYPE html>





<html>
    <head>
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title> Push Notification Service</title>
<meta name="viewport" content="width=device-width, initial-scale=1">  
<meta http-equiv="content-language" content="en-us" />

<meta name="og:site_name" value="Mattermost.com">
<meta name="og:title" value="Push Notification Service">

 
  <meta name="description" content="This guide focuses on installing and configuring the push notification service for Mattermost apps.">
<meta name="twitter:description" content="This guide focuses on installing and configuring the push notification service for Mattermost apps.">
<meta name="og:description" content="This guide focuses on installing and configuring the push notification service for Mattermost apps.">



 
<link rel="canonical" href="https://developers.mattermost.com/contribute/mobile/push-notifications/service/">


<link rel="shortcut icon" type="image/png" href="https://developers.mattermost.com/img/favicon-32x32.png" />

<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel="stylesheet">


<link rel="stylesheet" href="https://developers.mattermost.com/css/bootstrap.min.css">
<link rel="stylesheet" href="https://developers.mattermost.com/css/tabs.css">
<link rel="stylesheet" href="https://developers.mattermost.com/css/bar.css">
<link rel="stylesheet" href="https://developers.mattermost.com/css/styles.css">
<link rel="stylesheet" href="https://developers.mattermost.com/css/code.css">
<link rel="stylesheet" href="https://developers.mattermost.com/css/note.css">

<script async defer src="https://buttons.github.io/buttons.js"></script>


<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-53S4TVZ');</script>


    </head>
<body>
    
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-53S4TVZ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


    
<header class="with-notification-bar">

    <a href="https://developers.mattermost.com/"><img src="https://developers.mattermost.com/img/logo.svg" alt="Mattermost Logo" width="212px"></a>
    <div class="header__menu-toggle">
        <i class="fa fa-bars"></i>
    </div>
    <ul class="header__links--right">
        <li><a href="https://developers.mattermost.com/">Home</a></li>
        
            
            
            
                
                    <li class="active"><a href="https://developers.mattermost.com/contribute/getting-started/">Contribute</a></li>
                
            
        
            
            
            
                
                    <li><a href="https://developers.mattermost.com/integrate/getting-started/">Integrate</a></li>
                
            
        
            
            
            
                
                    <li><a href="https://developers.mattermost.com/extend/getting-started/">Extend</a></li>
                
            
        
            
            
            
                
                    <li><a href="https://developers.mattermost.com/blog/">Blog</a></li>
                
            
        
            
            
            
                
                    <li><a href="https://docs.mattermost.com/">Admin Docs</a></li>
                
            
        
    </ul>
</header>


<div class='notification-bar sticky-top'>
    <div class="notification-bar__content">
        <a class="notification-bar__close">
            <span aria-hidden="true">Ã—</span>
        </a>
        <a href="https://mattermost.com/careers">
            We&#39;re hiring!
        </a>
    </div>
</div>




    <div id="wrapper">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-3 sidebar">
    <div class="sidebar__menu-toggle">
        Push Notification Service
        <i class="fa fa-bars pull-right"></i>
    </div>
    <div class="row sidebar__links">
        
            
        
            
            
                
                

                
                

                
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style=""></i>
                    
                        <a href="https://developers.mattermost.com/contribute/getting-started/"> Getting Started</a>
                    
                </span>

                <ul class="sub-menu" >
                    
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/getting-started/contributions-without-ticket/"> Contributions Without Ticket</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/getting-started/contribution-checklist/"> Contribution Checklist</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/getting-started/inactive-contributions/"> Inactive Contributions</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/getting-started/core-committers/"> Core Committers</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/getting-started/code-review/"> Code Review</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/getting-started/labels/"> Labels</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/getting-started/branching/"> Mattermost tick-tock Branching Strategy</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/getting-started/slash-commands/"> Slash Commands</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/getting-started/guilds/"> Engineering Guilds</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                </ul>
            
                
                

                
                

                
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style=""></i>
                    
                        <a href="https://developers.mattermost.com/contribute/server/"> Server</a>
                    
                </span>

                <ul class="sub-menu" >
                    
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/server/developer-setup/"> Developer Setup</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/server/style-guide/"> Go Style Guide</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/server/feature-flags/"> Feature Flags</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/server/developer-workflow/"> Server Workflow</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/server/rest-api/"> REST API</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/server/system_console/"> System Console</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/server/dependencies/"> Dependencies</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/server/cli-commands/"> CLI Commands</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/server/plugins/"> Plugins</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/server/tooling/"> Tooling</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/server/developer-setup/arch/"> Arch Linux Development Environment Setup</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/server/developer-setup/centos/"> CentOS Development Environment Setup</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/server/developer-setup/ubuntu/"> Mattermost Developer Setup: Ubuntu</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/server/developer-setup/osx/"> OSX Development Environment Setup</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/server/developer-setup/windows-wsl/"> Windows with WSL Development Environment Setup</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                </ul>
            
                
                

                
                

                
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style=""></i>
                    
                        <a href="https://developers.mattermost.com/contribute/webapp/"> Web App</a>
                    
                </span>

                <ul class="sub-menu" >
                    
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/webapp/developer-setup/"> Developer Setup</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/webapp/developer-workflow/"> Web App Workflow</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/webapp/build-component/"> Build a Component</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/webapp/unit-testing/"> Unit Testing</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/webapp/end-to-end-tests/"> End-to-End Testing</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/webapp/using-i18n-extract/"> Using make i18n-extract</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style=""></i>
                            
                                <a href="https://developers.mattermost.com/contribute/webapp/redux/"> Redux</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                            
                                <span class="item ">
                                
                                    <a href="https://developers.mattermost.com/contribute/webapp/redux/actions/"> Actions</a>
                                
                                </span>
                            
                            
                                <span class="item ">
                                
                                    <a href="https://developers.mattermost.com/contribute/webapp/redux/reducers/"> Reducers</a>
                                
                                </span>
                            
                            
                                <span class="item ">
                                
                                    <a href="https://developers.mattermost.com/contribute/webapp/redux/selectors/"> Selectors</a>
                                
                                </span>
                            
                            
                                <span class="item ">
                                
                                    <a href="https://developers.mattermost.com/contribute/webapp/redux/react-redux/"> Using Redux with React</a>
                                
                                </span>
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/webapp/migrating-to-typescript/"> Migrating to Typescript</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                </ul>
            
                
                

                
                
                    
                

                
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-minus-square-o" aria-hidden="true" style=""></i>
                    
                        <a href="https://developers.mattermost.com/contribute/mobile/"> Mobile Apps</a>
                    
                </span>

                <ul class="sub-menu" style="display: block">
                    
                        
                        

                        
                        

                        
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style=""></i>
                            
                                <a href="https://developers.mattermost.com/contribute/mobile/developer-setup/"> Developer Setup</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                            
                                <span class="item ">
                                
                                    <a href="https://developers.mattermost.com/contribute/mobile/developer-setup/structure/"> Folder Structure</a>
                                
                                </span>
                            
                            
                                <span class="item ">
                                
                                    <a href="https://developers.mattermost.com/contribute/mobile/developer-setup/run/"> Run the app</a>
                                
                                </span>
                            
                            
                                <span class="item ">
                                
                                    <a href="https://developers.mattermost.com/contribute/mobile/developer-setup/dependecies/"> Add new dependencies</a>
                                
                                </span>
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style=""></i>
                            
                                <a href="https://developers.mattermost.com/contribute/mobile/build-your-own/"> Build Your Own App</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                            
                                <span class="item ">
                                
                                    <a href="https://developers.mattermost.com/contribute/mobile/build-your-own/android/"> Build the Android App</a>
                                
                                </span>
                            
                            
                                <span class="item ">
                                
                                    <a href="https://developers.mattermost.com/contribute/mobile/build-your-own/ios/"> Build the iOS App</a>
                                
                                </span>
                            
                            
                                <span class="item ">
                                
                                    <a href="https://developers.mattermost.com/contribute/mobile/build-your-own/white-label/"> White Labeling</a>
                                
                                </span>
                            
                        </ul>
                
                        
                        

                        
                        
                            
                        

                        
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-minus-square-o" aria-hidden="true" style=""></i>
                            
                                <a href="https://developers.mattermost.com/contribute/mobile/push-notifications/"> Setup Push Notifications</a>
                            
                        </span>

                        <ul class="sub-menu" style="display: block">
                            
                            
                                <span class="item ">
                                
                                    <a href="https://developers.mattermost.com/contribute/mobile/push-notifications/android/"> Android Push Notifications</a>
                                
                                </span>
                            
                            
                                <span class="item ">
                                
                                    <a href="https://developers.mattermost.com/contribute/mobile/push-notifications/ios/"> iOS Push Notifications</a>
                                
                                </span>
                            
                            
                                <span class="item active">
                                
                                    <a class="active" href="#"> Push Notification Service</a>
                                
                                </span>
                            
                            
                                <span class="item ">
                                
                                    <a href="https://developers.mattermost.com/contribute/mobile/push-notifications/corporate-proxy/"> Push Notification Service with Corporate Proxy</a>
                                
                                </span>
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style=""></i>
                            
                                <a href="https://developers.mattermost.com/contribute/mobile/unsigned/"> Sign Unsigned Builds</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                            
                                <span class="item ">
                                
                                    <a href="https://developers.mattermost.com/contribute/mobile/unsigned/android/"> Sign Unsigned Android</a>
                                
                                </span>
                            
                            
                                <span class="item ">
                                
                                    <a href="https://developers.mattermost.com/contribute/mobile/unsigned/ios/"> Sign Unsigned iOS</a>
                                
                                </span>
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style=""></i>
                            
                                <a href="https://developers.mattermost.com/contribute/mobile/e2e/"> Mobile End-to-End Testing</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                            
                                <span class="item ">
                                
                                    <a href="https://developers.mattermost.com/contribute/mobile/e2e/file-structure/"> Folder and File Structure</a>
                                
                                </span>
                            
                            
                                <span class="item ">
                                
                                    <a href="https://developers.mattermost.com/contribute/mobile/e2e/android/"> Setup and Run Android E2E</a>
                                
                                </span>
                            
                            
                                <span class="item ">
                                
                                    <a href="https://developers.mattermost.com/contribute/mobile/e2e/ios/"> Setup and Run iOS E2E</a>
                                
                                </span>
                            
                            
                                <span class="item ">
                                
                                    <a href="https://developers.mattermost.com/contribute/mobile/e2e/guide-for-writing/"> Guide for Writing E2E</a>
                                
                                </span>
                            
                            
                                <span class="item ">
                                
                                    <a href="https://developers.mattermost.com/contribute/mobile/e2e/environment-vars/"> Environment Variables</a>
                                
                                </span>
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/mobile/storybook/"> Storybook</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                </ul>
            
                
                

                
                

                
                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                    
                        <a href="https://developers.mattermost.com/contribute/plugins/"> Plugins</a>
                    
                </span>

                <ul class="sub-menu" >
                    
                </ul>
            
                
                

                
                

                
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style=""></i>
                    
                        <a href="https://developers.mattermost.com/contribute/desktop/"> Desktop App</a>
                    
                </span>

                <ul class="sub-menu" >
                    
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/desktop/developer-setup/"> Developer Setup</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/desktop/debugging/"> Debugging</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/contribute/desktop/code-signing/"> Code Signing</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                </ul>
            
                
                

                
                

                
                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                    
                        <a href="https://developers.mattermost.com/contribute/devtalks/"> Mattermost Dev Talks</a>
                    
                </span>

                <ul class="sub-menu" >
                    
                </ul>
            
                
                

                
                

                
                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                    
                        <a href="https://developers.mattermost.com/contribute/containers/"> Containers</a>
                    
                </span>

                <ul class="sub-menu" >
                    
                </ul>
            
                
                

                
                

                
                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                    
                        <a href="https://developers.mattermost.com/contribute/team_contributions/"> Contributor Wall of Fame</a>
                    
                </span>

                <ul class="sub-menu" >
                    
                </ul>
            
                
                

                
                

                
                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                    
                        <a href="https://developers.mattermost.com/contribute/gsoc/"> Google Summer of Code</a>
                    
                </span>

                <ul class="sub-menu" >
                    
                </ul>
            
                
                

                
                

                
                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                    
                        <a href="https://developers.mattermost.com/contribute/mvp/"> MVP</a>
                    
                </span>

                <ul class="sub-menu" >
                    
                </ul>
            
            
        
            
        
            
        
            
        
    </div>
</div>

                <div class="col-lg-9 doc-content">
                    
<a href="https://github.com/mattermost/mattermost-developer-documentation/edit/master/site/content/contribute/mobile/push-notifications/service.md" class="float-right edit-github">
    Edit on GitHub
</a>


                    <h1 class="mt-0 doc-title">
                        
                            Installing the Mattermost Push Notification Service
                        
                    </h1>
                    <h2 id="install-the-mattermost-push-notification-service">Install the Mattermost Push Notification Service&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#install-the-mattermost-push-notification-service"></i></a> </h2>
<p>Now that the app can receive push notifications, we need to make sure that the Mattermost Push Notification Service is able to send the notification to the device. This guide will focus on installing and configuring the push notification service.</p>
<h3 id="requirements">Requirements&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#requirements"></i></a> </h3>
<ul>
<li>A Linux box server with at least 1GB of memory.</li>
<li>A copy of the <a href="https://github.com/mattermost/mattermost-push-proxy/releases">Mattermost Push Notification Service</a>.</li>
<li><a href="https://developers.mattermost.com/contribute/mobile/build-your-own/">Custom Android and/or iOS</a> Mattermost mobile apps.</li>
<li>Private and public keys obtained from the <a href="https://developer.apple.com/account/ios/certificate/">Apple Developer Program</a>.</li>
<li>A Firebase Cloud Messaging Server key obtained from the <a href="https://console.firebase.google.com">Firebase Console</a>.</li>
</ul>
<h2 id="installing-and-upgrading">Installing and Upgrading&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#installing-and-upgrading"></i></a> </h2>
<p>For the sake of making this guide simple we located the files at <code>/home/ubuntu/mattermost-push-proxy</code>. We&rsquo;ve also elected to run the Push Notification Service as the <code>ubuntu</code> account for simplicity. We <strong>recommend</strong> setting up and running the service under a <code>mattermost-push-proxy</code> user account with limited permissions.</p>
<ol>
<li>Download the Mattermost Push Notification Service (any version):</li>
</ol>
<p><code>wget https://github.com/mattermost/mattermost-push-proxy/releases/download/vX.X.X/mattermost-push-proxy-X.X.X.tar.gz</code></p>
<p>In this command, <code>vX.X.X</code> refers to the release version you want to download. See <a href="https://github.com/mattermost/mattermost-push-proxy/releases">Mattermost Push Notification Service releases</a>.</p>
<ol start="2">
<li>
<p>If you&rsquo;re upgrading a previous version of the Mattermost Push Notification Service make sure to back up your <code>mattermost-push-proxy.json</code> file before continuing.</p>
</li>
<li>
<p>Unzip the downloaded Mattermost Push Notification Service using:
<code>tar -xvzf mattermost-push-proxy-X.X.X.tar.gz</code></p>
</li>
<li>
<p>Configure the Mattermost Push Notification service by editing the <code>mattermost-push-proxy.json</code> file at <code>/home/ubuntu/mattermost-push-proxy/config</code>. Follow the steps in the <a href="#set-up-mattermost-push-notification-service-to-send-android-push-notifications">Android</a>
and <a href="#set-up-mattermost-push-notification-service-to-send-ios-push-notifications">iOS</a> sections to replace the values in the config file.</p>
</li>
<li>
<p>Create a systemd unit file to manage the Mattermost Push Notification Services with systemd and log all output of the service to <code>/var/log/syslog</code> by running this command as root.</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#366">echo</span> <span style="color:#c30">&#34;[Unit]
</span><span style="color:#c30">Description=Mattermost Push Notification Service
</span><span style="color:#c30">
</span><span style="color:#c30">[Service]
</span><span style="color:#c30">Type=oneshot
</span><span style="color:#c30">ExecStart=/bin/sh -c &#39;/home/ubuntu/mattermost-push-proxy/bin/mattermost-push-proxy | logger&#39;
</span><span style="color:#c30">WorkingDirectory=/home/ubuntu/mattermost-push-proxy
</span><span style="color:#c30">
</span><span style="color:#c30">[Install]
</span><span style="color:#c30">WantedBy=multi-user.target&#34;</span> &gt;&gt; /etc/systemd/system/mattermost-push-proxy.service
</code></pre></div><p>To route the traffic through a separate proxy server, add <code>Environment=&quot;HTTP_PROXY=&lt;http://server&gt;&quot;</code> under the <code>[Service]</code> section of the file. If you have an HTTPS server, then use <code>HTTPS_PROXY</code>. If you set both then <code>HTTPS_PROXY</code> will take higher priority than <code>HTTP_PROXY</code>.</p>
</li>
<li>
<p>Start the service with <code>sudo systemctl start mattermost-push-proxy</code> or restart with <code>sudo systemctl restart mattermost-push-proxy</code>. Use <code>sudo systemctl enable mattermost-push-proxy</code> to have systemd start the service on boot.</p>
</li>
</ol>
<h3 id="set-up-mattermost-push-notification-service-to-send-android-push-notifications">Set Up Mattermost Push Notification Service to Send Android Push Notifications&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#set-up-mattermost-push-notification-service-to-send-android-push-notifications"></i></a> </h3>
<ul>
<li>
<p>Go to the <a href="https://console.firebase.google.com">Firebase Console</a> and select the project you&rsquo;ve created. Once in the dashboard, go to the project settings and select <strong>CLOUD MESSAGING</strong>.
<img src="https://developers.mattermost.com/img/mobile/firebase_settings.png" alt="image">
<img src="https://developers.mattermost.com/img/mobile/firebase_cloud_messaging.png" alt="image"></p>
</li>
<li>
<p>Look for the value of the <strong>Server key</strong> and copy it.
<img src="https://developers.mattermost.com/img/mobile/firebase_server_key.png" alt="image"></p>
</li>
<li>
<p>Open the <strong>mattermost-push-proxy.json</strong> file in the <code>mattermost-push-proxy/config</code> directory and look for the  &ldquo;AndroidApiKey&rdquo; entry. Paste the <strong>Server key</strong> as its value.</p>
<pre><code>&quot;AndroidApiKey&quot;: &quot;your Server key&quot;
</code></pre></li>
</ul>
<h3 id="set-up-mattermost-push-notification-service-to-send-ios-push-notifications">Set up Mattermost Push Notification Service to Send iOS Push Notifications&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#set-up-mattermost-push-notification-service-to-send-ios-push-notifications"></i></a> </h3>
<ul>
<li>
<p>Double click the <strong>Push Notifications Certificate</strong> which is generated and downloaded while <a href="https://developers.mattermost.com/contribute/mobile/push-notifications/ios">Setting up Push Notifications for iOS</a> to add it to your Keychain Access. It downloads by default as <code>aps.cer</code>.</p>
</li>
<li>
<p>Open <strong>Keychain Access</strong>, select the <strong>login</strong> keychain and <strong>My Certificates</strong> from the side menu.
<img src="https://developers.mattermost.com/img/mobile/ios_keychain_select.png" alt="image"></p>
</li>
<li>
<p>Find the certificate you imported and then right click to <strong>export</strong> it as a <strong>.p12</strong> file
<img src="https://developers.mattermost.com/img/mobile/ios_keychain_export.png" alt="image"></p>
</li>
<li>
<p>Enter a name for the filename and click <strong>Save</strong>
<img src="https://developers.mattermost.com/img/mobile/ios_keychain_export_save.png" alt="image"></p>
</li>
<li>
<p>Leave the <strong>password</strong> blank and then click <strong>OK</strong>
<img src="https://developers.mattermost.com/img/mobile/ios_keychain_export_password.png" alt="image"></p>
</li>
<li>
<p>Convert the downloaded certificate to <strong>.pem</strong></p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#c30;font-weight:bold">\$</span> openssl x509 -in aps.cer -inform DER -out aps_production.pem
</code></pre></div></li>
<li>
<p>Extract the private key from the certificate you exported ..</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#c30;font-weight:bold">\$</span> openssl pkcs12 -in Certificates.p12 -out aps_production_priv.pem -nodes -clcerts -passin pass:
</code></pre></div></li>
<li>
<p>Verify the certificate works with apple</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#c30;font-weight:bold">\$</span> openssl s_client -connect gateway.push.apple.com:2195 -cert aps_production.pem -key aps_production_priv.pem
</code></pre></div></li>
<li>
<p>Copy the private key file <code>aps_production_priv.pem</code> into your <code>mattermost-push-proxy/config</code> directory</p>
</li>
<li>
<p>Open the <strong>mattermost-push-proxy.json</strong> file under the <code>mattermost-push-proxy/config</code> directory and add the path to the private key file as the value for <strong>&ldquo;ApplePushCertPrivate&rdquo;</strong> and the value for <strong>&ldquo;ApplePushTopic&rdquo;</strong> with your <em>Bundle Identifier</em></p>
<p><img src="https://developers.mattermost.com/img/mobile/proxy-config.png" alt="image"></p>
</li>
</ul>
<p>In the <a href="https://github.com/mattermost/mattermost-push-proxy/tree/master/cmd/renew_apple_cert">mattermost-push-proxy project</a> there are some scripts to ease the process involved for updating the iOS notification certificates. Please check the README.md for further details.</p>
<h3 id="configure-the-mattermost-server-to-use-the-mattermost-push-notification-service">Configure the Mattermost Server to use the Mattermost Push Notification Service&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#configure-the-mattermost-server-to-use-the-mattermost-push-notification-service"></i></a> </h3>
<ul>
<li>In your Mattermost instance, enable mobile push notifications.
<ul>
<li>Go to <strong>System Console &gt; Notifications &gt; Mobile Push</strong>.</li>
<li>Under <strong>Send Push Notifications</strong>, select <strong>Manually enter Push Notification Service location</strong>.</li>
<li>Enter the location of your Mattermost Push Notification Service in the <strong>Push Notification Server</strong> field.</li>
</ul>
</li>
</ul>
<p><img src="https://developers.mattermost.com/img/mobile/manual_mpns.png" alt="image"></p>
<ul>
<li>(Optional) Customize mobile push notification contents.
<ul>
<li>Go to <strong>System Console &gt; Notifications &gt; Mobile Push</strong>.</li>
<li>Select an option for <strong>Push Notification Contents</strong> to specify what type of information to include in the push notifications.</li>
<li>Most deployments choose to include the full message snippet in push notifications unless they have policies against it to protect confidential information.</li>
</ul>
</li>
</ul>
<p><img src="https://developers.mattermost.com/img/mobile/push_contents.png" alt="image"></p>
<ul>
<li>Finally, start your Mattermost Push Notification Service, and your app should start receiving push notifications.</li>
</ul>
<h3 id="test-the-mattermost-push-notification-service">Test the Mattermost Push Notification Service&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#test-the-mattermost-push-notification-service"></i></a> </h3>
<ul>
<li>Verify that the server is functioning normally and test the push notification using curl:
<code>curl http://127.0.0.1:8066/api/v1/send_push -X POST -H &quot;Content-Type: application/json&quot; -d '{&quot;type&quot;: &quot;message&quot;, &quot;message&quot;: &quot;test&quot;, &quot;badge&quot;: 1, &quot;platform&quot;: &quot;PLATFORM&quot;, &quot;server_id&quot;: &quot;MATTERMOST_DIAG_ID&quot;, &quot;device_id&quot;: &quot;DEVICE_ID&quot;, &quot;channel_id&quot;: &quot;CHANNEL_ID&quot;}'</code>
<ul>
<li>Replace <code>MATTERMOST_DIAG_ID</code> with the value found by running the SQL query:</li>
</ul>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#069;font-weight:bold">SELECT</span> <span style="color:#555">*</span> <span style="color:#069;font-weight:bold">FROM</span> Systems <span style="color:#069;font-weight:bold">WHERE</span> Name <span style="color:#555">=</span> <span style="color:#c30">&#39;DiagnosticId&#39;</span>;
</code></pre></div><ul>
<li>Replace <code>DEVICE_ID</code> with your device ID, which can be found using (where <code>your_email@example.com</code> is the email address of the user you are logged in as):</li>
</ul>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#069;font-weight:bold">SELECT</span>
   Email, DeviceId
<span style="color:#069;font-weight:bold">FROM</span>
   Sessions,
   Users
<span style="color:#069;font-weight:bold">WHERE</span>
   Sessions.UserId <span style="color:#555">=</span> Users.Id
      <span style="color:#069;font-weight:bold">AND</span> DeviceId <span style="color:#555">!=</span> <span style="color:#c30">&#39;&#39;</span>
      <span style="color:#069;font-weight:bold">AND</span> Email <span style="color:#555">=</span> <span style="color:#c30">&#39;your_email@example.com&#39;</span>;
</code></pre></div><ul>
<li>Replace <code>CHANNEL_ID</code> with the Town Square channel ID, which can be found using:</li>
</ul>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#069;font-weight:bold">SELECT</span> Id <span style="color:#069;font-weight:bold">FROM</span> Channels <span style="color:#069;font-weight:bold">WHERE</span> DisplayName <span style="color:#555">=</span> <span style="color:#c30">&#39;Town Square&#39;</span>;
</code></pre></div><aside class="note">
  <div class="note-content">
      <strong>Migration</strong><br>
      Remove the <code>apple:</code>, <code>apple_rn</code>, <code>android:</code> or <code>android_rn:</code> prefix from your device ID before replacing <code>DEVICE_ID</code>. Use that prefix as the <code>PLATFORM</code> (make sure to remove the &ldquo;:&quot;).
  </div>
</li>
</ul>
</aside>
<ul>
<li>You can also verify push notifications are working by opening your Mattermost site and mentioning a user who has push notifications enabled in <strong>Account Settings &gt; Notifications &gt; Mobile Push Notifications</strong>.</li>
</ul>
<p>To view the log file, use:</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo tail -n <span style="color:#f60">1000</span> /var/log/upstart/mattermost-push-proxy.log
</code></pre></div><p><strong>Note:</strong>
Note that device IDs can change somewhat frequently, as they are tied to a device session. If you&rsquo;re having trouble, double-check the latest device IDs by re-running the above queries.</p>
<h3 id="troubleshooting">Troubleshooting&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#troubleshooting"></i></a> </h3>
<h5 id="high-sierra-apple-developer-keys-steps---follow-these-instructions-if-you-run-into-an-error-like-below">High Sierra Apple Developer Keys Steps - follow these instructions if you run into an error like below:&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#high-sierra-apple-developer-keys-steps---follow-these-instructions-if-you-run-into-an-error-like-below"></i></a> </h5>
<pre><code>2018/04/13 12:39:24 CRIT Failed to load the apple pem cert err=failed to parse PKCS1 private key for type=apple_rn
panic: Failed to load the apple pem cert err=failed to parse PKCS1 private key for type=apple_rn
</code></pre><ol>
<li>Follow the directions at <a href="https://developer.apple.com/library/content/documentation/IDEs/Conceptual/AppDistributionGuide/DistributingEnterpriseProgramApps/DistributingEnterpriseProgramApps.html#//apple_ref/doc/uid/TP40012582-CH33-SW4">developer.apple.com</a> to generate an Apple Push Notification service SSL Certificate, this should give you an <code>aps_production.cer</code></li>
<li>Convert the certificate format to .pem:</li>
</ol>
<ul>
<li><code>openssl x509 -in aps.cer -inform DER -out aps_production.pem</code></li>
</ul>
<ol start="3">
<li>Double click <code>aps_production.cer</code> to install it into the keychain tool</li>
<li>Right click the private cert in keychain access and export to .p12</li>
<li>Extract the private key from the certificate into an intermediate state:</li>
</ol>
<ul>
<li><code>openssl pkcs12 -in Certificates.p12 -out intermediate.pem -nodes -clcerts</code></li>
</ul>
<ol start="6">
<li>Generate an intermediate RSA private key</li>
</ol>
<ul>
<li><code>openssl rsa -in intermediate.pem -out intermediate_rsa_priv.pem</code></li>
</ul>
<ol start="7">
<li>Remove the private key information from intermediate.pem</li>
</ol>
<ul>
<li><code>sed -i '/^-----BEGIN PRIVATE KEY-----$/,$d' intermediate.pem</code></li>
</ul>
<ol start="8">
<li>Combine intermediate.pem and intermediate_rsa_priv.pem to create a valid bundle</li>
</ol>
<ul>
<li><code>cat intermediate.pem intermediate_rsa_priv.pem &gt;&gt; aps_production_priv.pem &amp;&amp; rm intermediate.pem intermediate_rsa_priv.pem</code></li>
</ul>
<ol start="6">
<li>Verifying the certificate works with apple:</li>
</ol>
<ul>
<li><code>openssl s_client -connect gateway.push.apple.com:2195 -cert aps_production.pem -key aps_production_priv.pem</code></li>
</ul>
<h5 id="devicetokennotfortopic">DeviceTokenNotForTopic&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#devicetokennotfortopic"></i></a> </h5>
<p><strong>For iOS / Apple Push Notifications</strong>: If the logs are reflecting DeviceTokenNotForTopic (error 400) this may be because you&rsquo;re using an older / previous Device ID. Re-run the queries you need to get device IDs and test.</p>
<p>This could also be because you generated a certificate for the wrong bundle ID. The bundle ID used in <code>mattermost-push-proxy.json</code> should be the same one as the app and the for the same app it was generated for.</p>
<h3 id="reporting-issues">Reporting issues&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#reporting-issues"></i></a> </h3>
<p>For issues with repro steps, please report to <a href="https://github.com/mattermost/mattermost-server/issues">https://github.com/mattermost/mattermost-server/issues</a></p>


                </div>
            </div>
        </div>
    </div>
    <footer class="text-center">
    <div class="container-fluid">
        <div class="footer__copyright">Â© Mattermost, Inc. All Rights Reserved.</div>
        <div class="footer__icons">
            <a href="https://www.facebook.com/Mattermost-2300985916642531/" target="_blank" rel="noopener noreferrer" class="btn-primary"><i class="fa fa-facebook"></i></a>
            <a href="https://twitter.com/mattermost" target="_blank" rel="noopener noreferrer" class="btn-primary"><i class="fa fa-twitter"></i></a>
            <a href="https://www.youtube.com/channel/UCNR05H72hi692y01bWaFXNA" target="_blank" rel="noopener noreferrer" class="btn-primary"><i class="fa fa-youtube"></i></a>
        </div>
    </div>
</footer>


<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>
<script src="https://developers.mattermost.com/js/tabs.js"></script>
<script src="https://developers.mattermost.com/js/main.js"></script>

</body>
</html>
